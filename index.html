<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cinematic Bible Story Generator</title>
<style>
    body { margin: 0; overflow: hidden; background: black; color: white; }
    #inputBox {
        position: fixed;
        top: 10px; left: 50%; transform: translateX(-50%);
        background: rgba(0,0,0,0.7);
        padding: 10px;
        border-radius: 8px;
        z-index: 2;
        text-align: center;
    }
    textarea { width: 400px; height: 80px; }
    button { padding: 6px 12px; margin-top: 6px; }
</style>
</head>
<body>

<div id="inputBox">
    <textarea id="story" placeholder="Enter Bible story text here..."></textarea><br>
    <button onclick="startStory()">Play Cinematic</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.0/examples/jsm/postprocessing/EffectComposer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.0/examples/jsm/postprocessing/RenderPass.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.0/examples/jsm/postprocessing/UnrealBloomPass.js"></script>

<script>
let scene, camera, renderer, composer, textMesh;
let clock = new THREE.Clock();

init();

function init() {
    scene = new THREE.Scene();

    camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0, 0, 15);

    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Cinematic desert-like background
    const loader = new THREE.TextureLoader();
    loader.load("https://i.ibb.co/XD1YgH3/desert-sky.jpg", texture => {
        scene.background = texture;
    });

    // Light setup
    const light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.set(5, 10, 7);
    scene.add(light);

    // Postprocessing (bloom effect)
    composer = new THREE.EffectComposer(renderer);
    const renderPass = new THREE.RenderPass(scene, camera);
    composer.addPass(renderPass);

    const bloomPass = new THREE.UnrealBloomPass(
        new THREE.Vector2(window.innerWidth, window.innerHeight),
        0.8, 0.5, 0.85
    );
    composer.addPass(bloomPass);

    window.addEventListener("resize", onWindowResize);
    animate();
}

function startStory() {
    if (textMesh) scene.remove(textMesh);

    const storyText = document.getElementById("story").value || 
        "In the days of King Ahab, Elijah stood before him...";
    const fontLoader = new THREE.FontLoader();
    fontLoader.load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json", font => {
        const textGeo = new THREE.TextGeometry(storyText, {
            font: font,
            size: 0.6,
            height: 0.05,
            curveSegments: 12
        });
        const textMat = new THREE.MeshStandardMaterial({ color: 0xffcc66, emissive: 0x442200 });
        textMesh = new THREE.Mesh(textGeo, textMat);
        textMesh.position.set(-10, 0, 0);
        scene.add(textMesh);
    });
}

function animate() {
    requestAnimationFrame(animate);

    const delta = clock.getDelta();
    if (textMesh) {
        textMesh.position.x += delta * 0.5; // smooth scroll
        textMesh.rotation.y = Math.sin(Date.now() * 0.0005) * 0.1; // cinematic sway
    }

    composer.render();
}

function onWindowResize() {
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
    composer.setSize(window.innerWidth, window.innerHeight);
}
</script>
</body>
</html>
