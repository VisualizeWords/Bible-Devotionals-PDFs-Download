<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Image to Video Converter</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
  video, img { max-width: 100%; margin-top: 20px; }
  button { margin-top: 10px; padding: 10px 20px; font-size: 16px; }
  #status { margin-top: 15px; font-style: italic; color: #555; }
</style>
</head>
<body>

<h1>Image to Video Converter</h1>
<input type="file" id="imageInput" accept="image/*"><br>
<button id="convertBtn">Convert to Video</button>
<div id="status"></div>
<div id="preview"></div>

<script src="https://unpkg.com/@ffmpeg/ffmpeg@0.12.2/dist/ffmpeg.min.js"></script>
<script>
const { createFFmpeg, fetchFile } = FFmpeg;
const ffmpeg = createFFmpeg({ log: true });

document.getElementById('convertBtn').addEventListener('click', async () => {
  const fileInput = document.getElementById('imageInput');
  const statusDiv = document.getElementById('status');
  const previewDiv = document.getElementById('preview');
  
  if (!fileInput.files.length) {
    alert("Please select an image first!");
    return;
  }

  try {
    statusDiv.textContent = "Loading video tools... please wait.";
    await ffmpeg.load();

    statusDiv.textContent = "Processing your image into video...";
    ffmpeg.FS('writeFile', 'input.png', await fetchFile(fileInput.files[0]));

    await ffmpeg.run(
      '-loop', '1',
      '-i', 'input.png',
      '-t', '5',
      '-vf', 'scale=1280:720',
      '-r', '30',
      'output.mp4'
    );

    const data = ffmpeg.FS('readFile', 'output.mp4');
    const videoBlob = new Blob([data.buffer], { type: 'video/mp4' });
    const videoUrl = URL.createObjectURL(videoBlob);

    statusDiv.textContent = "Done! Your video is ready.";
    previewDiv.innerHTML = `
      <video controls src="${videoUrl}"></video><br>
      <a href="${videoUrl}" download="output.mp4"><button>Download Video</button></a>
    `;
  } catch (err) {
    console.error(err);
    statusDiv.textContent = "‚ùå Something went wrong: " + err.message;
  }
});
</script>

</body>
</html>
